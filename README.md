Тестовое задание для DexDigital

Запуск приложения:
cp .env.example .env

Конфиг для бд в env:
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=dexdigital_test
DB_USERNAME=sail
DB_PASSWORD=password

alias sail='bash vendor/bin/sail'
sail up -d
sail artisan key:generate
sail artisan migrate



Описание:
Как я понял задание от HR нужно создать "приложение" которое имитирует получение ответа от платёжной системы и записывает данные в таблицы

Имел опыт работы с платёжками, руководствуюсь данным опытом:
При создании заказа редиректит на страницу оплаты, в массиве который мы передаём есть ссылка callback. На данную "ссылку" мы получаем статус платежа. 
Как правило ответ приходит не сразу.

В получаемом массиве (как я понял) есть "элемент" - "transactions", он хранит в себе все транзакции по данному ордеру, 
Создал миграцию под название "transactions" у неё есть связь с таблицей "orders", 
В данной таблице создал поля: 
"order_index" - по логике и по всем правилам называться должен "order_id", но данное поле есть в связанной таблице (не хотел создавать путаницы);
"transaction_id" уникальное поле, в массиве в данном поле вижу тире, но надеюсь что данное поле имеет тип int. В реквесте буду приводить к данному типу;

В таблице "orders"
"order_id" - уникальное поля ордера

Можно было создать еще таблицу для логирования ошибок, для валют и видов банковских карт, но я не стал этого делать, думаю это и не нужно

Ответ получаем на '/callback' это апи роут (запрос идёт из вне)
Обрабатываем запрос в классе реквест классе ApiRequest
В задании было "при неудачной оплате редиректить на страницу fail", так как ответ нам присылает платёжная система я подумал что нет смысла её редиректить на страницу,
И просто создал json ответ при неудачной валидации полей
Но проблем не составит сделать редирект на нужную страницу с ответом

При успешной валидации данные записываются по таблицам 

На основе этого можно реализовать обновление.





